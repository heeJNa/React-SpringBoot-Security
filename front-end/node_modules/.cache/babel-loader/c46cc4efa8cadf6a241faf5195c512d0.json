{"ast":null,"code":"import axios from \"axios\";\nimport React from \"react\";\nimport App from '../../App';\nimport app from \"../../App\";\nimport { getCookie, setCookie } from \"../util/Cookie\";\nconst JWT_EXPIRY_TIME = 24 * 3600 * 1000; // 만료 시간 (24시간 밀리 초로 표현)\n\nexport const onLogin = (email, password) => {\n  axios.post(\"http://localhost:8080/user/login\", {\n    email: email,\n    password: password\n  }).then(res => {\n    onLoginSuccess(res);\n    console.log(\"로그인 성공\");\n    alert(\"로그인 성공\");\n    document.location.href = \"/\";\n  }).catch(error => {\n    if (error.response) {\n      alert(error.response.data);\n    }\n\n    console.log(\"로그인 실패\");\n  });\n};\nexport const onSilentRefresh = () => {\n  console.log(\"refresh\");\n  axios.post(\"http://localhost:8080/user/refresh\").then(res => {\n    onLoginSuccess(res);\n  }).catch(error => {\n    if (error.response) {\n      alert(error.response.data);\n    }\n  });\n};\n\nconst onLoginSuccess = response => {\n  console.log(response); // accessToken 만료하기 1분 전에 로그인 연장\n\n  setTimeout(onSilentRefresh, JWT_EXPIRY_TIME - 60000);\n  sessionStorage.setItem(\"isLogin\", \"login\");\n};\n\nexport const logout = () => {\n  axios.post(\"http://localhost:8080/user/logout\").then(res => {\n    sessionStorage.removeItem(\"isLogin\");\n    console.log(\"로그아웃 성공\");\n    document.location.href = \"/\";\n  }).catch(error => {\n    if (error.response) {\n      alert(error.response.data);\n    }\n  });\n};","map":{"version":3,"sources":["/Users/kimheejun/git/React_SpringBoot/front-end/src/component/auth/LoginLogic.js"],"names":["axios","React","App","app","getCookie","setCookie","JWT_EXPIRY_TIME","onLogin","email","password","post","then","res","onLoginSuccess","console","log","alert","document","location","href","catch","error","response","data","onSilentRefresh","setTimeout","sessionStorage","setItem","logout","removeItem"],"mappings":"AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,OAAOC,GAAP,MAAgB,WAAhB;AACA,OAAOC,GAAP,MAAgB,WAAhB;AACA,SAAQC,SAAR,EAAmBC,SAAnB,QAAmC,gBAAnC;AACA,MAAMC,eAAe,GAAG,KAAK,IAAL,GAAY,IAApC,C,CAA0C;;AAE1C,OAAO,MAAMC,OAAO,GAAG,CAACC,KAAD,EAAQC,QAAR,KAAqB;AAExCT,EAAAA,KAAK,CAACU,IAAN,CAAW,kCAAX,EAA8C;AAC1CF,IAAAA,KAAK,EAACA,KADoC;AAE1CC,IAAAA,QAAQ,EAACA;AAFiC,GAA9C,EAIKE,IAJL,CAIUC,GAAG,IAAG;AACRC,IAAAA,cAAc,CAACD,GAAD,CAAd;AACAE,IAAAA,OAAO,CAACC,GAAR,CAAY,QAAZ;AACAC,IAAAA,KAAK,CAAC,QAAD,CAAL;AACAC,IAAAA,QAAQ,CAACC,QAAT,CAAkBC,IAAlB,GAAuB,GAAvB;AACH,GATL,EASOC,KATP,CASaC,KAAK,IAAE;AACZ,QAAGA,KAAK,CAACC,QAAT,EAAkB;AACdN,MAAAA,KAAK,CAACK,KAAK,CAACC,QAAN,CAAeC,IAAhB,CAAL;AACH;;AACDT,IAAAA,OAAO,CAACC,GAAR,CAAY,QAAZ;AACH,GAdL;AAeH,CAjBM;AAmBP,OAAO,MAAMS,eAAe,GAAG,MAAM;AACjCV,EAAAA,OAAO,CAACC,GAAR,CAAY,SAAZ;AACAf,EAAAA,KAAK,CAACU,IAAN,CAAW,oCAAX,EAEKC,IAFL,CAEUC,GAAG,IAAE;AACPC,IAAAA,cAAc,CAACD,GAAD,CAAd;AACH,GAJL,EAKKQ,KALL,CAKWC,KAAK,IAAI;AACZ,QAAGA,KAAK,CAACC,QAAT,EAAkB;AACdN,MAAAA,KAAK,CAACK,KAAK,CAACC,QAAN,CAAeC,IAAhB,CAAL;AACH;AACJ,GATL;AAUH,CAZM;;AAcP,MAAMV,cAAc,GAAIS,QAAD,IAAc;AACjCR,EAAAA,OAAO,CAACC,GAAR,CAAYO,QAAZ,EADiC,CAEjC;;AACAG,EAAAA,UAAU,CAACD,eAAD,EAAkBlB,eAAe,GAAG,KAApC,CAAV;AACAoB,EAAAA,cAAc,CAACC,OAAf,CAAuB,SAAvB,EAAiC,OAAjC;AACH,CALD;;AAOA,OAAO,MAAMC,MAAM,GAAG,MAAK;AACvB5B,EAAAA,KAAK,CAACU,IAAN,CAAW,mCAAX,EACKC,IADL,CACUC,GAAG,IAAE;AACPc,IAAAA,cAAc,CAACG,UAAf,CAA0B,SAA1B;AACAf,IAAAA,OAAO,CAACC,GAAR,CAAY,SAAZ;AACAE,IAAAA,QAAQ,CAACC,QAAT,CAAkBC,IAAlB,GAAuB,GAAvB;AACH,GALL,EAMKC,KANL,CAMWC,KAAK,IAAI;AACZ,QAAGA,KAAK,CAACC,QAAT,EAAkB;AACdN,MAAAA,KAAK,CAACK,KAAK,CAACC,QAAN,CAAeC,IAAhB,CAAL;AACH;AACJ,GAVL;AAWH,CAZM","sourcesContent":["import axios from \"axios\";\nimport React from \"react\";\nimport App from '../../App'\nimport app from \"../../App\";\nimport {getCookie, setCookie} from \"../util/Cookie\";\nconst JWT_EXPIRY_TIME = 24 * 3600 * 1000; // 만료 시간 (24시간 밀리 초로 표현)\n\nexport const onLogin = (email, password) => {\n\n    axios.post(\"http://localhost:8080/user/login\",{\n        email:email,\n        password:password\n    })\n        .then(res =>{\n            onLoginSuccess(res)\n            console.log(\"로그인 성공\")\n            alert(\"로그인 성공\");\n            document.location.href=\"/\"\n        }).catch(error=>{\n            if(error.response){\n                alert(error.response.data)\n            }\n            console.log(\"로그인 실패\")\n        })\n}\n\nexport const onSilentRefresh = () => {\n    console.log(\"refresh\")\n    axios.post(\"http://localhost:8080/user/refresh\",\n    )\n        .then(res=>{\n            onLoginSuccess(res)\n        })\n        .catch(error => {\n            if(error.response){\n                alert(error.response.data)\n            }\n        });\n}\n\nconst onLoginSuccess = (response) => {\n    console.log(response)\n    // accessToken 만료하기 1분 전에 로그인 연장\n    setTimeout(onSilentRefresh, JWT_EXPIRY_TIME - 60000);\n    sessionStorage.setItem(\"isLogin\",\"login\")\n}\n\nexport const logout = () =>{\n    axios.post(\"http://localhost:8080/user/logout\",)\n        .then(res=>{\n            sessionStorage.removeItem(\"isLogin\")\n            console.log(\"로그아웃 성공\")\n            document.location.href=\"/\"\n        })\n        .catch(error => {\n            if(error.response){\n                alert(error.response.data)\n            }\n        });\n}\n"]},"metadata":{},"sourceType":"module"}